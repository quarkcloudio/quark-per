!function(e){"use strict";var r,t,n,o,i,a,u,c,s,f,l,m,d,v=function(e){var r=e,t=function(){return r};return{get:t,set:function(e){r=e},clone:function(){return v(t())}}},g=function(e){return parseInt(e,10)},p=function(e,r,t){return{major:e,minor:r,patch:t}},h=function(e){var r=/([0-9]+)\.([0-9]+)\.([0-9]+)(?:(\-.+)?)/.exec(e);return r?p(g(r[1]),g(r[2]),g(r[3])):p(0,0,0)},b=function(e,r){var t=e-r;return 0===t?0:0<t?1:-1},y=function(e,r){return!!e&&-1===function(e,r){var t=b(e.major,r.major);if(0!==t)return t;var n=b(e.minor,r.minor);if(0!==n)return n;var o=b(e.patch,r.patch);return 0!==o?o:0}(h([(t=e).majorVersion,t.minorVersion].join(".").split(".").slice(0,3).join(".")),h(r));var t},S=function(){},O=function(e){return function(){return e}},w=O(!1),N=O(!0),T=function(){return x(0,0)},x=function(e,r){return{major:e,minor:r}},E={nu:x,detect:function(e,r){var t=String(r).toLowerCase();return 0===e.length?T():function(e,r){var t=function(e,r){for(var t=0;t<e.length;t++){var n=e[t];if(n.test(r))return n}}(e,r);if(!t)return{major:0,minor:0};var n=function(e){return Number(r.replace(t,"$"+e))};return x(n(1),n(2))}(e,t)},unknown:T},k="Edge",A="Chrome",_="Opera",D="Firefox",C="Safari",L=function(e,r){return function(){return r===e}},R=function(e){var r=e.current;return{current:r,version:e.version,isEdge:L(k,r),isChrome:L(A,r),isIE:L("IE",r),isOpera:L(_,r),isFirefox:L(D,r),isSafari:L(C,r)}},P={unknown:function(){return R({current:void 0,version:E.unknown()})},nu:R,edge:O(k),chrome:O(A),ie:O("IE"),opera:O(_),firefox:O(D),safari:O(C)},F="Windows",I="Android",M="Linux",B="Solaris",j="FreeBSD",U=function(e,r){return function(){return r===e}},V=function(e){var r=e.current;return{current:r,version:e.version,isWindows:U(F,r),isiOS:U("iOS",r),isAndroid:U(I,r),isOSX:U("OSX",r),isLinux:U(M,r),isSolaris:U(B,r),isFreeBSD:U(j,r)}},q={unknown:function(){return V({current:void 0,version:E.unknown()})},nu:V,windows:O(F),ios:O("iOS"),android:O(I),linux:O(M),osx:O("OSX"),solaris:O(B),freebsd:O(j)},z=function(){return X},X=(r=function(e){return e.isNone()},o={fold:function(e,r){return e()},is:w,isSome:w,isNone:N,getOr:n=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:O(null),getOrUndefined:O(void 0),or:n,orThunk:t,map:z,each:S,bind:z,exists:w,forall:N,filter:z,equals:r,equals_:r,toArray:function(){return[]},toString:O("none()")},Object.freeze&&Object.freeze(o),o),H=function(e){var r=O(e),t=function(){return o},n=function(r){return r(e)},o={fold:function(r,t){return t(e)},is:function(r){return e===r},isSome:N,isNone:w,getOr:r,getOrThunk:r,getOrDie:r,getOrNull:r,getOrUndefined:r,or:t,orThunk:t,map:function(r){return H(r(e))},each:function(r){r(e)},bind:n,exists:n,forall:n,filter:function(r){return r(e)?o:X},toArray:function(){return[e]},toString:function(){return"some("+e+")"},equals:function(r){return r.is(e)},equals_:function(r,t){return r.fold(w,(function(r){return t(e,r)}))}};return o},W={some:H,none:z,from:function(e){return null==e?X:H(e)}},Y=function(e){return function(r){return function(e){if(null===e)return"null";var r=typeof e;return"object"===r&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===r&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":r}(r)===e}},G=Y("string"),$=Y("array"),K=Y("boolean"),Z=Y("function"),J=Y("number"),Q=(Array.prototype.slice,Array.prototype.indexOf),ee=Array.prototype.push,re=function(e,r){return t=e,n=r,-1<Q.call(t,n);var t,n},te=function(e,r){for(var t=0,n=e.length;t<n;t++)if(r(e[t],t))return!0;return!1},ne=function(e,r){for(var t=e.length,n=new Array(t),o=0;o<t;o++){var i=e[o];n[o]=r(i,o)}return n},oe=function(e,r){for(var t=[],n=0,o=e.length;n<o;n++){var i=e[n];r(i,n)&&t.push(i)}return t},ie=function(e,r){for(var t=0,n=e.length;t<n;t++){var o=e[t];if(r(o,t))return W.some(o)}return W.none()},ae=function(e,r){return function(e){for(var r=[],t=0,n=e.length;t<n;++t){if(!$(e[t]))throw new Error("Arr.flatten item "+t+" was not an array, input: "+e);ee.apply(r,e[t])}return r}(ne(e,r))},ue=(Z(Array.from)&&Array.from,function(e,r){var t=String(r).toLowerCase();return ie(e,(function(e){return e.search(t)}))}),ce=function(e,r){return ue(e,r).map((function(e){var t=E.detect(e.versionRegexes,r);return{current:e.name,version:t}}))},se=function(e,r){return ue(e,r).map((function(e){var t=E.detect(e.versionRegexes,r);return{current:e.name,version:t}}))},fe=function(e,r){return-1!==e.indexOf(r)},le=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,me=function(e){return function(r){return fe(r,e)}},de=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return fe(e,"edge/")&&fe(e,"chrome")&&fe(e,"safari")&&fe(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,le],search:function(e){return fe(e,"chrome")&&!fe(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return fe(e,"msie")||fe(e,"trident")}},{name:"Opera",versionRegexes:[le,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:me("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:me("firefox")},{name:"Safari",versionRegexes:[le,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(fe(e,"safari")||fe(e,"mobile/"))&&fe(e,"applewebkit")}}],ve=[{name:"Windows",search:me("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return fe(e,"iphone")||fe(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:me("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:me("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:me("linux"),versionRegexes:[]},{name:"Solaris",search:me("sunos"),versionRegexes:[]},{name:"FreeBSD",search:me("freebsd"),versionRegexes:[]}],ge={browsers:O(de),oses:O(ve)},pe=v(function(e,r){var t,n,o,i,a,u,c,s,f,l,m,d,v=ge.browsers(),g=ge.oses(),p=ce(v,e).fold(P.unknown,P.nu),h=se(g,e).fold(q.unknown,q.nu);return{browser:p,os:h,deviceType:(n=p,o=e,i=r,a=(t=h).isiOS()&&!0===/ipad/i.test(o),u=t.isiOS()&&!a,c=t.isiOS()||t.isAndroid(),s=c||i("(pointer:coarse)"),f=a||!u&&c&&i("(min-device-width:768px)"),l=u||c&&!f,m=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(o),d=!l&&!f&&!m,{isiPad:O(a),isiPhone:O(u),isTablet:O(f),isPhone:O(l),isTouch:O(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:O(m),isDesktop:O(d)})}}(e.navigator.userAgent,(function(r){return e.window.matchMedia(r).matches}))),he=function(){return pe.get()},be=Object.keys,ye=Object.hasOwnProperty,Se=function(e,r){for(var t=be(e),n=0,o=t.length;n<o;n++){var i=t[n];r(e[i],i)}},Oe=function(e,r){var t={};return Se(e,(function(e,n){var o=r(e,n);t[o.k]=o.v})),t},we=function(e){return r=function(e){return e},t=[],Se(e,(function(e,n){t.push(r(e,n))})),t;var r,t},Ne=function(e,r){return Te(e,r)?W.from(e[r]):W.none()},Te=function(e,r){return ye.call(e,r)},xe=(e.Node.ATTRIBUTE_NODE,e.Node.CDATA_SECTION_NODE,e.Node.COMMENT_NODE,e.Node.DOCUMENT_NODE,e.Node.DOCUMENT_TYPE_NODE,e.Node.DOCUMENT_FRAGMENT_NODE,e.Node.ELEMENT_NODE),Ee=e.Node.TEXT_NODE,ke=(e.Node.PROCESSING_INSTRUCTION_NODE,e.Node.ENTITY_REFERENCE_NODE,e.Node.ENTITY_NODE,e.Node.NOTATION_NODE,void 0!==e.window?e.window:Function("return this;")(),i=Ee,function(e){return e.dom().nodeType===i}),Ae=function(r,t,n){!function(r,t,n){if(!(G(n)||K(n)||J(n)))throw e.console.error("Invalid call to Attr.set. Key ",t,":: Value ",n,":: Element ",r),new Error("Attribute value was not simple");r.setAttribute(t,n+"")}(r.dom(),t,n)},_e=function(e,r){var t=e.dom().getAttribute(r);return null===t?void 0:t},De=function(e,r){e.dom().removeAttribute(r)},Ce=function(e,r){var t=_e(e,r);return void 0===t||""===t?[]:t.split(" ")},Le=function(e){return void 0!==e.dom().classList},Re=function(e){return Ce(e,"class")},Pe=function(e,r){return o=r,i=Ce(t=e,n="class").concat([o]),Ae(t,n,i.join(" ")),!0;var t,n,o,i},Fe=function(e,r){return o=r,0<(i=oe(Ce(t=e,n="class"),(function(e){return e!==o}))).length?Ae(t,n,i.join(" ")):De(t,n),!1;var t,n,o,i},Ie=function(e,r){var t;Le(e)?e.dom().classList.remove(r):Fe(e,r),0===(Le(t=e)?t.dom().classList:Re(t)).length&&De(t,"class")},Me=function(e){if(null==e)throw new Error("Node cannot be null or undefined");return{dom:O(e)}},Be={fromHtml:function(r,t){var n=(t||e.document).createElement("div");if(n.innerHTML=r,!n.hasChildNodes()||1<n.childNodes.length)throw e.console.error("HTML does not have a single root node",r),new Error("HTML must have a single root node");return Me(n.childNodes[0])},fromTag:function(r,t){var n=(t||e.document).createElement(r);return Me(n)},fromText:function(r,t){var n=(t||e.document).createTextNode(r);return Me(n)},fromDom:Me,fromPoint:function(e,r,t){var n=e.dom();return W.from(n.elementFromPoint(r,t)).map(Me)}},je=function(e,r){e.fire("FormatPainterToggle",{state:r})};(u=a||(a={})).Retrival="Retrieval",u.Application="Application",(s=c||(c={})).ListSchema="ListSchema",s.SubstitutionSchema="SubstitionSchema",(l=f||(f={})).InsertUnorderedList="InsertUnorderedList",l.InsertOrderedList="InsertOrderedList",l.InsertDefinitionList="InsertDefinitionList",(d=m||(m={})).Table="Table",d.Unspecified="Unspecified";var Ue=function(e){var r,t;r=Be.fromDom(e.getBody()),t="tox-cursor-format-painter",Le(r)?r.dom().classList.add(t):Pe(r,t)},Ve=function(e,r){var t;t=e,Ie(Be.fromDom(t.getBody()),"tox-cursor-format-painter"),r.set(a.Retrival),je(e,!1)},qe=function(e,r){r.get()===a.Application?Ve(e,r):function(e,r){var t=he(),n=v(!1);Ue(e),r.set(a.Application),je(e,!0),e.execCommand("mceRetrieveFormats");var o=function(){e.execCommand("mcePaintFormats"),Ve(e,r)},i=function(){r.get()===a.Application&&o(),f()},u=function(i){r.get()===a.Application&&("touchcancel"===i.type&&t.os.isAndroid()?e.once("contextmenu",o):n.get()?o():e.once("selectionchange",o)),f()},c=function(t){27===t.keyCode&&(Ve(e,r),f())},s=function(e){n.set("touchmove"===e.type)};e.on("click",i),e.on("touchstart touchmove",s),e.on("touchend touchcancel",u),e.on("keydown",c);var f=function(){e.off("click",i),e.off("touchstart touchmove",s),e.off("touchend touchcancel",u),e.off("keydown",c)}}(e,r)},ze=xe,Xe=function(e,r){return e.dom()===r.dom()},He=(he().browser.isIE(),function(e,r){var t=e.dom();if(t.nodeType!==ze)return!1;var n=t;if(void 0!==n.matches)return n.matches(r);if(void 0!==n.msMatchesSelector)return n.msMatchesSelector(r);if(void 0!==n.webkitMatchesSelector)return n.webkitMatchesSelector(r);if(void 0!==n.mozMatchesSelector)return n.mozMatchesSelector(r);throw new Error("Browser lacks native selectors")}),We=function(e,r,t){for(var n=e.dom(),o=Z(t)?t:O(!1);n.parentNode;){n=n.parentNode;var i=Be.fromDom(n);if(r(i))return W.some(i);if(o(i))break}return W.none()},Ye=function(e,r,t){var n,o,i,a;return n=We,a=t,function(e,r){return r(e)}(o=e,i=r)?W.some(o):Z(a)&&a(o)?W.none():n(o,i,a)},Ge={formatpainter_checklist:{selector:"ul",classes:"tox-checklist"},formatpainter_liststyletype:{selector:"ul,ol",styles:{listStyleType:"%value"}},formatpainter_borderstyle:{selector:"td,th",styles:{borderTopStyle:"%valueTop",borderRightStyle:"%valueRight",borderBottomStyle:"%valueBottom",borderLeftStyle:"%valueLeft"},remove_similar:!0},formatpainter_bordercolor:{selector:"td,th",styles:{borderTopColor:"%valueTop",borderRightColor:"%valueRight",borderBottomColor:"%valueBottom",borderLeftColor:"%valueLeft"},remove_similar:!0},formatpainter_backgroundcolor:{selector:"td,th",styles:{backgroundColor:"%value"},remove_similar:!0},formatpainter_removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*:not(tr,td,th,table)",attributes:["style","class"],split:!1,expand:!1,deep:!0}],formatpainter_legacy_font:{inline:"font",attributes:{size:"%value"}}},$e=function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var n=Array(e),o=0;for(r=0;r<t;r++)for(var i=arguments[r],a=0,u=i.length;a<u;a++,o++)n[o]=i[a];return n},Ke=function(e,r){return Ne(r,"selector").exists((function(r){var t=e.getBody(),n=e.selection.getStart(),o=e.dom.getParents(n,O(!0),t),i=e.selection.getSelectedBlocks();return e.dom.is($e(o,i),r)}))},Ze=function(e,r){return te(e.formatter.get(r),(function(r){return t=e,Te(n=r,"inline")&&!Ke(t,n);var t,n}))},Je=function(e,r,t){return te(r.get(t),(function(r){return t=e,Te(n=r,"block")||Ke(t,n);var t,n}))},Qe=function(e){return 1<e.length&&"%"===e.charAt(0)},er=function(e,r){return te(e.formatter.get(r),(function(e){return t=Ne(r=e,"styles").exists((function(e){return te(we(e),Qe)})),n=Ne(r,"attributes").exists((function(e){return te(we(e),Qe)})),t||n;var r,t,n}))},rr=function(e){return He(e,"OL,UL,DL")},tr=function(e){return He(e,"LI,DT,DD")},nr=function(e,r,t){var n,o=e.formatter,i=Ze(e,t.formatName),a=Je(e,o,t.formatName),u=(n=t.formatName,re(["formatpainter_borderstyle","formatpainter_bordercolor","formatpainter_backgroundcolor"],n));(r.table&&u||r.inline&&i||r.block&&a&&!u)&&o.apply(t.formatName,t.substitutedVariables)},or=function(e,r){var t,n,o,i=function(e){return Xe(e,r)};return(t=Ye(Be.fromDom(e.getStart()),rr,i),n=Ye(Be.fromDom(e.getEnd()),rr,i),o=function(e,r){return Xe(e,r)},t.isSome()&&n.isSome()?W.some(o(t.getOrDie(),n.getOrDie())):W.none()).getOr(!1)},ir=function(e){var r=e.selection,t=r.getRng(),n=Be.fromDom(e.getBody()),o=oe(e.selection.getSelectedBlocks().map(Be.fromDom),tr),i=t.collapsed&&o.length,a=o.length&&!or(r,n);return 1<o.length||i||a},ar=function(e,r){var t,n;t=e,n=r.context,t.formatter.remove("formatpainter_removeformat"),n===m.Table&&function(e,r){for(var t=0,n=e.length;t<n;t++)r(e[t],t)}(["formatpainter_borderstyle","formatpainter_bordercolor","formatpainter_backgroundcolor"],(function(e){t.formatter.remove(e)})),ir(t)&&t.execCommand("RemoveList");var o,i,a,u,s,f,l=(a=(o=e).selection.getStart(),u=o.selection.getRng().collapsed,s=0<o.dom.select("td[data-mce-selected]").length,f=!!o.dom.getParent(a,"TABLE"),{inline:!0,table:u&&f||s,block:u||(i=o.selection,1<i.getSelectedBlocks().length)||s});r.schemas.forEach((function(r){switch(r.kind){case c.ListSchema:t=e,n=r,l.block&&t.execCommand(n.command);break;case c.SubstitutionSchema:nr(e,l,r)}var t,n}))},ur=function(e){return Le(e)?function(e){for(var r=e.dom().classList,t=new Array(r.length),n=0;n<r.length;n++)t[n]=r.item(n);return t}(e):Re(e)},cr=function(r,t){var n,o,i=r.dom(),a=e.window.getComputedStyle(i).getPropertyValue(t),u=""!==a||null!=(o=ke(n=r)?n.dom().parentNode:n.dom())&&o.ownerDocument.body.contains(o)?a:sr(i,t);return null===u?void 0:u},sr=function(e,r){return void 0!==(t=e).style&&Z(t.style.getPropertyValue)?e.style.getPropertyValue(r):"";var t},fr=function(){return(fr=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},lr=function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var n=Array(e),o=0;for(r=0;r<t;r++)for(var i=arguments[r],a=0,u=i.length;a<u;a++,o++)n[o]=i[a];return n},mr=function(e,r){return Oe(r,(function(r,t){return{k:r.slice(1,r.length),v:(n=e,o=t,"class"===o?ur(n).filter((function(e){return!/^(mce-.*)/.test(e)})).join(" "):_e(n,o))};var n,o}))},dr=function(e){return(r=e,t=function(e){return 1<(r=e).length&&"%"===r.charAt(0);var r},n={},o={},Se(r,(function(e,r){(t(e,r)?n:o)[r]=e})),{t:n,f:o}).t;var r,t,n,o},vr=function(e,r){var t=Ne(e,"styles").map((function(e){return t=r,n=dr(e),Oe(n,(function(e,r){return{k:e.slice(1,e.length),v:cr(t,(n=r,n.replace(/([A-Z])/g,(function(e){return"-"+e[0].toLowerCase()}))))};var n}));var t,n})),n=Ne(e,"attributes").map((function(e){return mr(r,dr(e))})),o=fr(fr({},t.getOr({})),n.getOr({}));return we(o).every((function(e){return""!==e}))?W.some(o):W.none()},gr=function(e,r,t){return(n=e.get(r),0===n.length?W.none():W.some(n[0])).bind((function(e){return vr(e,t)})).map((function(e){return{kind:c.SubstitutionSchema,formatName:r,substitutedVariables:e}}));var n},pr=function(e,r){return(t=e,n=t.getParam("formatpainter_blacklisted_formats","link,address,removeformat,formatpainter_removeformat","string").split(/[ ,]/),be(t.formatter.get()).filter((function(e){return!re(n,e)}))).filter((function(t){var n=er(e,t);return e.formatter.matchNode(r.dom(),t,{},n)}));var t,n},hr=function(e){return(r=e,ie(we(f),(function(e){return r.queryCommandState(e)}))).map((function(e){return{kind:c.ListSchema,command:e}}));var r},br=function(e){var r,t,n,o,i,a=e.dom,u=e.selection.getStart();return{schemas:lr(hr(e).toArray(),(n=e,o=u,i=n.dom.getParents(o,O(!0)),ae(ne(i,Be.fromDom),(function(e){return ae(pr(n,e),(function(r){return gr(n.formatter,r,e).toArray()}))})))),context:(r=a,t=u,r.getParent(t,"TABLE")?m.Table:m.Unspecified)}},yr=function(r){if(y(tinymce,"4.9.0"))return e.window.console.error("The format painter plugin requires at least version 4.9.0 of TinyMCE."),{};var t,n,o,i,u,c,s,f,l=v(a.Retrival),d=v({schemas:[],context:m.Unspecified});return(t=r).on("PreInit",(function(){Se(Ge,(function(e,r){t.formatter.get(r)||t.formatter.register(r,e)}))})),o=l,i=d,(n=r).addCommand("mceToggleFormatPainter",(function(){qe(n,o)})),n.addCommand("mcePaintFormats",(function(){n.undoManager.transact((function(){ar(n,i.get())}))})),n.addCommand("mceRetrieveFormats",(function(){i.set(br(n))})),(u=r).ui?(s=u).ui.registry.addToggleButton("formatpainter",{active:!1,icon:"format-painter",tooltip:"Format Painter",onAction:function(){return s.execCommand("mceToggleFormatPainter")},onSetup:function(e){var r=function(r){e.setActive(r.state)};return s.on("FormatPainterToggle",r),function(){return s.off("FormatPainterToggle",r)}}}):(c=u).addButton("formatpainter",{active:!1,icon:"format-painter",tooltip:"Format Painter",cmd:"mceToggleFormatPainter",onPostRender:function(e){c.on("FormatPainterToggle",(function(r){e.control.active(r.state)}))}}),(f=r).addShortcut("Meta+alt+C","",(function(){f.execCommand("mceRetrieveFormats")})),f.addShortcut("Meta+alt+V","",(function(){f.execCommand("mcePaintFormats")})),{}};tinymce.PluginManager.add("formatpainter",yr)}(window);