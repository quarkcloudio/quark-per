!function(){"use strict";function t(t){t.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){var e=t;new l((function(t){var n=document.createElement("input");n.type="file",n.accept="image/*",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.opacity="0.001",document.body.appendChild(n),n.addEventListener("change",(function(e){t(Array.prototype.slice.call(e.target.files))}));var r=function(o){function i(){t([]),n.parentNode.removeChild(n)}s.os.isAndroid()&&"remove"!==o.type?d.setEditorTimeout(e,i,0):i(),e.off("focusin remove",r)};e.on("focusin remove",r),n.click()})).then((function(e){var n,r;0<e.length&&(n=e[0],r=n,new l((function(t){var e=new FileReader;e.onloadend=function(){t(e.result.split(",")[1])},e.readAsDataURL(r)})).then((function(e){var r,o,i,u,c,l;o=e,i=n,c=(r=t).editorUpload.blobCache,l=c.create((u=(new Date).getTime(),"mceu_"+Math.floor(1e9*Math.random())+ ++a+String(u)),i,o),c.add(l),r.insertContent(r.dom.createHTML("img",{src:l.blobUri()}))})))}))}}),t.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){var e,n;(e=t).plugins.table?e.plugins.table.insertTable(2,2):(n=e).undoManager.transact((function(){n.insertContent(function(){var t='<table data-mce-id="mce" style="width: 100%">';t+="<tbody>";for(var e=0;e<2;e++){t+="<tr>";for(var n=0;n<2;n++)t+="<td><br></td>";t+="</tr>"}return(t+="</tbody>")+"</table>"}());var t=n.dom.select("*[data-mce-id]")[0];t.removeAttribute("data-mce-id");var e=n.dom.select("td,th",t);n.selection.setCursorLocation(e[0],0)}))}})}function e(t){return function(e){return r=typeof(n=e),(null===n?"null":"object"==r&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==r&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":r)===t;var n,r}}function n(t){return function(e){return typeof e===t}}function r(t){return function(){return t}}function o(t){return t}function i(){return y}var u,c=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=0,l=tinymce.util.Tools.resolve("tinymce.util.Promise"),s=tinymce.util.Tools.resolve("tinymce.Env"),d=tinymce.util.Tools.resolve("tinymce.util.Delay"),f=e("string"),m=e("object"),g=e("array"),v=n("boolean"),h=n("function"),p=r(!1),b=r(!(u=void 0)),y={fold:function(t,e){return t()},isSome:p,isNone:b,getOr:o,getOrThunk:k,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:o,orThunk:k,map:i,each:function(){},bind:i,exists:p,forall:b,filter:function(){return y},toArray:function(){return[]},toString:r("none()")};function k(t){return t()}var w=function(t){function e(){return i}function n(e){return e(t)}var o=r(t),i={fold:function(e,n){return n(t)},isSome:b,isNone:p,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:e,orThunk:e,map:function(e){return w(e(t))},each:function(e){e(t)},bind:n,exists:n,forall:n,filter:function(e){return e(t)?i:y},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return i},T={some:w,none:i,from:function(t){return null==t?y:w(t)}};function E(t,e,n,r,o){return t(n,r)?T.some(n):h(o)&&o(n)?T.none():e(n,r,o)}function N(t,e){var n=t.dom;if(1!==n.nodeType)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}function M(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}}var S={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return M(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return M(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return M(n)},fromDom:M,fromPoint:function(t,e,n){return T.from(t.dom.elementFromPoint(e,n)).map(M)}};function C(t,e,n){for(var r=t.dom,o=h(n)?n:p;r.parentNode;){r=r.parentNode;var i=S.fromDom(r);if(e(i))return T.some(i);if(o(i))break}return T.none()}function O(t,e,n){return C(t,(function(t){return N(t,e)}),n)}"undefined"!=typeof window||Function("return this;")();var q,x=(q=f,function(t,e,n){return function(){if(!q(n))throw new Error("Default value doesn't match requested type.")}(),function(t,e){if(g(t)||m(t))throw new Error("expected a string but found: "+t);return u===t?e:v(t)?!1===t?"":e:t}(t.getParam(e,n),n)});c.add("quickbars",(function(e){var n,r;t(e),0<(r=x(n=e,"quickbars_insert_toolbar","quickimage quicktable")).trim().length&&n.ui.registry.addContextToolbar("quickblock",{predicate:function(t){function e(t){return t.dom===n.getBody()}var r=S.fromDom(t),o=n.schema.getTextBlockElements();return E(N,O,r,"table",e).fold((function(){return E((function(t,e){return e(t)}),C,r,(function(t){return t.dom.nodeName.toLowerCase()in o&&n.dom.isEmpty(t.dom)}),e).isSome()}),p)},items:r,position:"line",scope:"editor"}),function(t){function e(t){return"IMG"===t.nodeName||"FIGURE"===t.nodeName&&/image/i.test(t.className)}var n=x(t,"quickbars_image_toolbar","alignleft aligncenter alignright");0<n.trim().length&&t.ui.registry.addContextToolbar("imageselection",{predicate:e,items:n,position:"node"});var r=x(t,"quickbars_selection_toolbar","bold italic | quicklink h2 h3 blockquote");0<r.trim().length&&t.ui.registry.addContextToolbar("textselection",{predicate:function(n){return!e(n)&&!t.selection.isCollapsed()&&"false"!==t.dom.getContentEditableParent(n)},items:r,position:"selection",scope:"editor"})}(e)}))}();