!function(){"use strict";function e(e){e.keyCode!==u.TAB||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),i=tinymce.util.Tools.resolve("tinymce.EditorManager"),o=tinymce.util.Tools.resolve("tinymce.Env"),l=tinymce.util.Tools.resolve("tinymce.util.Delay"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=tinymce.util.Tools.resolve("tinymce.util.VK"),s=n.DOM;t.add("tabfocus",(function(t){function n(e){var t,n,c,y,d;e.keyCode!==u.TAB||e.ctrlKey||e.altKey||e.metaKey||e.isDefaultPrevented()||(n=function(n){function o(t){return/INPUT|TEXTAREA|BUTTON/.test(t.tagName)&&i.get(e.id)&&-1!==t.tabIndex&&u(t)}var l=s.select(":input:enabled,*[tabindex]:not(iframe)"),u=function(e){return"BODY"===e.nodeName||"hidden"!==e.type&&"none"!==e.style.display&&"hidden"!==e.style.visibility&&u(e.parentNode)};if(r.each(l,(function(e,n){if(e.id===a.id)return t=n,!1})),0<n){for(var c=t+1;c<l.length;c++)if(o(l[c]))return l[c]}else for(c=t-1;0<=c;c--)if(o(l[c]))return l[c];return null},1===(c=r.explode(a.getParam("tab_focus",a.getParam("tabfocus_elements",":prev,:next")))).length&&(c[1]=c[0],c[0]=":prev"),(y=e.shiftKey?":prev"===c[0]?n(-1):s.get(c[0]):":next"===c[1]?n(1):s.get(c[1]))&&(d=i.get(y.id||y.name),y.id&&d?d.focus():l.setTimeout((function(){o.webkit||window.focus(),y.focus()}),10),e.preventDefault()))}var a;(a=t).on("init",(function(){a.inline&&s.setAttrib(a.getBody(),"tabIndex",null),a.on("keyup",e),o.gecko?a.on("keypress keydown",n):a.on("keydown",n)}))}))}();