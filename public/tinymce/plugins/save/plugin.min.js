!function(){"use strict";function e(e){return e.getParam("save_enablewhendirty",!0)}function n(e,n){e.notificationManager.open({text:n,type:"error"})}function t(t){t.addCommand("mceSave",(function(){!function(t){var o=i.DOM.getParent(t.id,"form");if(!e(t)||t.isDirty()){if(t.save(),t.getParam("save_onsavecallback"))return t.execCallback("save_onsavecallback",t),t.nodeChanged();o?(t.setDirty(!1),o.onsubmit&&!o.onsubmit()||("function"==typeof o.submit?o.submit():n(t,"Error: Form submit field collision.")),t.nodeChanged()):n(t,"Error: No form element found.")}}(t)})),t.addCommand("mceCancel",(function(){var e=t,n=c.trim(e.startContent);e.getParam("save_oncancelcallback")?e.execCallback("save_oncancelcallback",e):e.resetContent(n)}))}function o(n){return function(t){function o(){t.setDisabled(e(n)&&!n.isDirty())}return o(),n.on("NodeChange dirty",o),function(){return n.off("NodeChange dirty",o)}}}var a=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=tinymce.util.Tools.resolve("tinymce.util.Tools");a.add("save",(function(e){var n;(n=e).ui.registry.addButton("save",{icon:"save",tooltip:"Save",disabled:!0,onAction:function(){return n.execCommand("mceSave")},onSetup:o(n)}),n.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",disabled:!0,onAction:function(){return n.execCommand("mceCancel")},onSetup:o(n)}),n.addShortcut("Meta+S","","mceSave"),t(e)}))}();